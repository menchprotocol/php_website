<?php

die('Must update code to consider multiple types when updating...');

$x__creator = ( $member_e ? $member_e['e__id'] : 7274 );

$categories = '<ul class="all-categories-grid" style="--card-horizontal-padding:var(--spacing-xs); --card-margin-bottom:0;"><li class="margin-bottom-5xs"><a href="/icons/categories/accessibility" class="card"><div class="header"><i class="fas fa-universal-access fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Accessibility icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/alert" class="card"><div class="header"><i class="fas fa-bell-on fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Alert icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/alphabet" class="card"><div class="header"><i class="fas fa-circle-a fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Alphabet icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/animals" class="card"><div class="header"><i class="fas fa-cat fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Animals icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/arrows" class="card"><div class="header"><i class="fas fa-square-up-right fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Arrows icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/astronomy" class="card"><div class="header"><i class="fas fa-planet-ringed fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Astronomy icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/automotive" class="card"><div class="header"><i class="fas fa-car-side fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Automotive icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/buildings" class="card"><div class="header"><i class="fas fa-landmark fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Buildings icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/business" class="card"><div class="header"><i class="fas fa-briefcase fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Business icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/camping" class="card"><div class="header"><i class="fas fa-campfire fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Camping icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/charity" class="card"><div class="header"><i class="fas fa-hands-holding-heart fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Charity icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/charts-diagrams" class="card"><div class="header"><i class="fas fa-chart-simple fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Charts + Diagrams icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/childhood" class="card"><div class="header"><i class="fas fa-balloons fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Childhood icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/clothing-fashion" class="card"><div class="header"><i class="fas fa-t-shirt fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Clothing + Fashion icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/coding" class="card"><div class="header"><i class="fas fa-code fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Coding icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/communication" class="card"><div class="header"><i class="fas fa-message-dots fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Communication icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/connectivity" class="card"><div class="header"><i class="fas fa-signal-bars fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Connectivity icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/construction" class="card"><div class="header"><i class="fas fa-person-digging fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Construction icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/design" class="card"><div class="header"><i class="fas fa-palette fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Design icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/devices-hardware" class="card"><div class="header"><i class="fas fa-computer-classic fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Devices + Hardware icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/disaster" class="card"><div class="header"><i class="fas fa-burst fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Disaster + Crisis icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/editing" class="card"><div class="header"><i class="fas fa-pen-line fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Editing icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/education" class="card"><div class="header"><i class="fas fa-graduation-cap fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Education icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/emoji" class="card"><div class="header"><i class="fas fa-face-grin-wink fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Emoji icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/energy" class="card"><div class="header"><i class="fas fa-bolt fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Energy icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/files" class="card"><div class="header"><i class="fas fa-files fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Files icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/film-video" class="card"><div class="header"><i class="fas fa-film fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Film + Video icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/food-beverage" class="card"><div class="header"><i class="fas fa-burger-soda fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Food + Beverage icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/fruits-vegetables" class="card"><div class="header"><i class="fas fa-strawberry fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Fruits + Vegetables icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/gaming" class="card"><div class="header"><i class="fas fa-joystick fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Gaming icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/gender" class="card"><div class="header"><i class="fas fa-venus-mars fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Genders icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/halloween" class="card"><div class="header"><i class="fas fa-jack-o-lantern fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Halloween icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/hands" class="card"><div class="header"><i class="fas fa-hand-paper fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Hands icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/holidays" class="card"><div class="header"><i class="fas fa-party-horn fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Holidays icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/household" class="card"><div class="header"><i class="fas fa-bed-front fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Household icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/humanitarian" class="card"><div class="header"><i class="fas fa-parachute-box fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Humanitarian icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/logistics" class="card"><div class="header"><i class="fas fa-truck-fast fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Logistics icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/maps" class="card"><div class="header"><i class="fas fa-map fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Maps icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/maritime" class="card"><div class="header"><i class="fas fa-anchor fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Maritime icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/marketing" class="card"><div class="header"><i class="fas fa-bullseye-arrow fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Marketing icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/mathematics" class="card"><div class="header"><i class="fas fa-abacus fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Mathematics icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/media-playback" class="card"><div class="header"><i class="fas fa-play-pause fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Media Playback icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/medical-health" class="card"><div class="header"><i class="fas fa-stethoscope fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Medical + Health icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/money" class="card"><div class="header"><i class="fas fa-money-bill-simple-wave fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Money icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/moving" class="card"><div class="header"><i class="fas fa-box-taped fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Moving icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/music-audio" class="card"><div class="header"><i class="fas fa-music fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Music + Audio icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/nature" class="card"><div class="header"><i class="fas fa-trees fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Nature icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/numbers" class="card"><div class="header"><i class="fas fa-circle-2 fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Numbers icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/photos-images" class="card"><div class="header"><i class="fas fa-camera-retro fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Photos + Images icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/political" class="card"><div class="header"><i class="fas fa-check-double fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Political icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/punctuation-symbols" class="card"><div class="header"><i class="fas fa-quote-left fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Punctuation + Symbols icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/religion" class="card"><div class="header"><i class="fas fa-person-praying fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Religion icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/science" class="card"><div class="header"><i class="fas fa-atom-simple fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Science icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/science-fiction" class="card"><div class="header"><i class="fas fa-raygun fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Science Fiction icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/security" class="card"><div class="header"><i class="fas fa-shield fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Security icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/shapes" class="card"><div class="header"><i class="fas fa-shapes fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Shapes icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/shopping" class="card"><div class="header"><i class="fas fa-bag-shopping fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Shopping icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/social" class="card"><div class="header"><i class="fas fa-hashtag fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Social icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/spinners" class="card"><div class="header"><i class="fas fa-rotate fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Spinners icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/sports-fitness" class="card"><div class="header"><i class="fas fa-heart-pulse fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Sports + Fitness icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/text-formatting" class="card"><div class="header"><i class="fas fa-text-size fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Text Formatting icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/time" class="card"><div class="header"><i class="fas fa-calendar-days fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Time icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/toggle" class="card"><div class="header"><i class="fas fa-toggle-on fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Toggle icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/transportation" class="card"><div class="header"><i class="fas fa-taxi-bus fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Transportation icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/travel-hotel" class="card"><div class="header"><i class="fas fa-spa fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Travel + Hotel icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/users-people" class="card"><div class="header"><i class="fas fa-people-simple fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Users + People icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/weather" class="card"><div class="header"><i class="fas fa-cloud-sun fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Weather icons</p></div></a></li><li class="margin-bottom-5xs"><a href="/icons/categories/writing" class="card"><div class="header"><i class="fas fa-typewriter fa-fw fa-3x padding-y-3xs"></i></div> <div class="section"><p class="text-capitalize text-truncate">Writing icons</p></div></a></li></ul>';

//fix:
$postfix = array(
    'fal' => ' Thin',
    'fas' => ' Bold',
    'fad' => ' Duoto',
);
$count = 0;
$animal = 0;
foreach($this->X_model->fetch(array(
    'x__up' => 14986,
    'x__type IN (' . join(',', $this->config->item('n___32292')) . ')' => null, //SOURCE LINKS
    'x__access IN (' . join(',', $this->config->item('n___7359')) . ')' => null, //PUBLIC
    'e__access IN (' . join(',', $this->config->item('n___7358')) . ')' => null, //ACTIVE
), array('x__down'), 0, 0) as $e){

    $count++;
    foreach(array(
                'fal' => 20425,
                'fas' => 20426,
                'fad' => 20427,
            ) as $prefix => $type_id){

        //Create Icon:
        $added_e = $this->E_model->verify_create($e['e__title'].$postfix[$prefix], $x__creator, str_replace('far ',$prefix.' ',$e['e__cover']));
        if($added_e['status']){

            //Link to proper folder:
            $this->X_model->create(array(
                'x__up' => $type_id,
                'x__type' => 4230,
                'x__creator' => $x__creator,
                'x__down' => $added_e['new_e']['e__id'],
            ));

            if(in_array($e['e__id'], $this->config->item('n___12279'))){
                $this->X_model->create(array(
                    'x__up' => 12279, //Animals
                    'x__type' => 4230,
                    'x__creator' => $x__creator,
                    'x__down' => $added_e['new_e']['e__id'],
                ));
                $animal++;
            }

            $added++;
            //echo '<span class="icon-block" title="'.$icon_title.'"><i class="'.$icon_code.'"></i></span>';

        }

    }
}

echo $count.' Icons scanned, '.$added.' added, '.$animal.' animals.';


$processed = false;
foreach(array(
    'far' => 14986,
    'fab' => 14988,
) as $key => $type_id){
    if(isset($_POST[$key]) && strlen($_POST[$key])){

        $processed = true;
        $detected = 0;
        $added = 0;

        foreach(explode("\n", $_POST[$key]) as $line){
            $words = explode('	', $line);
            if(count($words)==3 && strlen(trim($words[2]))==4){

                $detected++;
                $icon_title = ucwords(str_replace('-',' ',$words[1]));
                $icon_code = $key.' fa-'.$words[1];

                //Check if exists:
                if(!count($this->X_model->fetch(array( //SOURCE PROFILE
                    'x__access IN (' . join(',', $this->config->item('n___7359')) . ')' => null, //PUBLIC
                    'x__type IN (' . join(',', $this->config->item('n___32292')) . ')' => null, //SOURCE LINKS
                    'x__up' => $type_id,
                    'e__cover' => $icon_code,
                ), array('x__down')))){

                    //ADD NEW Source:
                    $added_e = $this->E_model->verify_create($icon_title, $x__creator, $icon_code);
                    if($added_e['status']){

                        //Link to proper folder:
                        $this->X_model->create(array(
                            'x__up' => $type_id, //MEMBERS
                            'x__type' => 4230,
                            'x__creator' => $x__creator,
                            'x__down' => $added_e['new_e']['e__id'],
                        ));

                        $added++;
                        echo '<span class="icon-block" title="'.$icon_title.'"><i class="'.$icon_code.'"></i></span>';

                    }
                }
            }
        }

        echo '<br /><br />'.$added.'/'.$detected.' '.strtoupper($key).' icons added.<br /><br />';

    }
}



if(!$processed){

    //SHow Form:
    echo '<form method="POST" action="">';

    //Latest version
    echo '<p>Check <a href="https://fontawesome.com/pro" target="_blank"><u>Latest Version</u></a> in the middle of page & Update config value for <a href="/@13577" target="_blank"><u>@13577</u></a> ['.view_memory(6404,13577).']</p><br /><br />';

    //Regular
    echo '<p>Copy <a href="https://fontawesome.com/cheatsheet/pro/regular" target="_blank"><u>Regular Font Awesome Cheatsheet</u></a> here:</p>';
    echo '<textarea class="form-control text-edit border no-padding" style="height: 100px;" name="far" data-lpignore="true" placeholder="Paste Cheatsheet..."></textarea><br /><br />';


    //Brands
    echo '<p>Copy <a href="https://fontawesome.com/cheatsheet/pro/brands" target="_blank"><u>Brand Font Awesome Cheatsheet</u></a> here:</p>';
    echo '<textarea class="form-control text-edit border no-padding" style="height: 100px;" name="fab" data-lpignore="true" placeholder="Paste Cheatsheet..."></textarea><br /><br />';

    //Apply
    echo '<button type="submit" class="btn btn-lrg btn-6255 go-next top-margin">UPDATE</button>';


    echo '</form>';

}




